---
layout: post
title:  "OMG SPING"
date:   2018-07-01 10:59:21 +0700
categories: Language
---
<h1> SPRING! </h1> <br>

`[참조]` : 각종 홈페이지 예제를 위주로 작성할 예정. <br>
SPRIGN,JAVA가 익숙하지 않은 내가 SPRING 프로젝트를 해야 할때.
인프런의 강좌를 추천해 주셨지만, 그 강좌를 다 본다고 해서 프로젝트를 수월하게 할 것 같지 않다. <br>
<div class="redFont"> 방향을 바꾸자 !!!
</div><br>
나는 방향을 바꿔서 강좌에 있는 강의 목록을 위주로 인터넷에서 예제를 찾아 가면서 공부할 예정이다. 각 강좌당 10개의 예제를 직접 작성해 보자.<br>

---
<h1>강의 목록</h1><br>

1. Spring Project 만들기 <br>
2. Spring DI 예제 <br>
3. Spring DI 활용 <br>
4. Spring DI 설정 방법 <br>
5. Life Cycle 생명 주기와 범위 <br>
6. 외부 파일을 이용한 설정 <br>
7. AOP <br>
8. MVC 기초 <br>
9. Spring MVC 게시판 <br>
10. Spring JDBC  <br>
11. Controller <br>
12. Form data <br>
13. `@requestMapping`파라미터 <br>
14. Form data 값 검증 <br>
15. Spring MVC 게시판 <br>
16. Spring JDBC <br>
17. Spring Security <br>
18. Mybatis <br>

될 수 있으면, 빨리 빨리 진행 하자. 다음 주 수요일 까지 spring과 oracle 연동이다.<br>

주말에 각종 예제를 통해 이해를 하고 월요일 부터 DB 연동을 할 예정이다.<br>


---
<h1>Spring Project 만들기</h1><br>
eclipse를 최신 버전으로 다시 설치 했다. Eclipse photon <br>

[File] -> [new] ->prject -> Spring Lagacy Project -> Simple Spring Maven 을 선택해서 Project 명을 지정해 준다. <br>

{% for post in site.posts limit:1 %}
<img src="https://paypulse.github.io/assets/images/springstart.png" width="621" height="993"/>  
{% endfor %} <br>

Project를 생성 후 <br>
{% for post in site.posts limit:1 %}
<img src="https://paypulse.github.io/assets/images/workdirectory.png" width="227" height="221"/>  
{% endfor %}<br>

[src/main/java] --> package 파일을 만들고 그 안에 java class를 작성해서 결과를 console 창에서 확인 한다.<br>

Spring MVC project 예제 전까지 console창에 결과를 확인 할 것 같다.<br>

---
<h1>Spring DI 예제 </h1><br>
[목표] : 10개 정도 분석 할 예정이다.<br>

DI : Dependency Injection

[참조] : http://private.tistory.com/39,
https://m.blog.naver.com/PostView.nhn?blogId=sim4858&logNo=220935583802&proxyReferer=https%3A%2F%2Fwww.google.co.kr%2F,
http://www.nextree.co.kr/p11247/


---
이주일 정도 걸린것 같다. 나의 공부 방식이 정말 잘못 됬다는 걸 깨닫는데. 엄청난 시간이 소요 됬다.
가장 중요한건 강의다. 강의를 위주로 공부의 뼈대를 정리 하자 그리고 책을 읽어서 살을 붙이자.<br>

---
<h1>1 강 . Spring 이란?</h1><br>

`프레임 워크란?`<br>
특정한 목적에 맞게 프로그래밍을 쉽게 하기 위한 약속 입니다. <br>

<div  class="blueFont">
스프링 프레임 워크란? : 자바 언어를 기반으로 한 프레임 워크이다.
다양한 어플리케이션을 제작 하기 위한 약속된 프로그래밍 틀 이다.
EJB에 비해 접근하기 쉽다.스프링 학습 이전에 Java, JSP and Servlet 에 대한 선행 학습이 반듯이 필요 하며,
html, javascript, jqury, css등의 스크립트 언어도 기본적인 학숩이 필요하다.
</div><br>

<div class="redFont">
아.. 젠장... spring 공부 이전에 java, jsp, servlet에 대한 이해가 많이 필요 하다고 한다.
지금까지 나는 깡으로 버텼구나. 그래 계속 깡으로 밀고 나가 보자. 할게 너무 너무 많다.
</div><br>

java sdk 설치 , 환경 변수 설치는 java posting에 해놨다. java도 계속 공부 해야 하는데...<br>
일단 나는 eclipse Luna 버젼에서 하고 있다. 강의에 맞는 환경으로 하기때문인데. 일단 익숙해지면, 바꿀 예정이다. <br>

Tomcat은 7.0버젼 (서버는 아니고 web container에 해당)을 설치 했고, eclipse에서 STS 라는 플러그인을 다운 받아서 설치 했다. <br>

<h2>Tomcat eclipse 환경 설정</h2><br>
1. eclipse -> show view -> servers  탭 선택 <br>
2. 압축을 푼 tomcat 경로에서 tomcat 추가 <br>
3. eclipse 상에서 tomcat 더블클릭 <br>
4. [설정] -> port :8181이라고 설정 이유는 오라클 내부적으로도 http 프로토콜을 통해서 통신을 하기때문에 그부분에서 8080 포트를 사용해서 충돌이 날 우려가 있기 때문이다.  <br>
5. servers locations  탭에서  use tomcat installation을 선택 <br>
7. servers option 탭에서 Publish module context to seperate XML files 선택 <br>
8. Modules auto reload by default를 선택 <br>

---
<h1>2 강. spring project 만들기 </h1><br>

가장 먼저 eclipse에 spring plugin인 STS를 설치 한다. <br>
eclipse market place -> sts 검색  -> sts installation<br>
perspective도 spring으로 바꾼다. <br>

`spring project 1` <br>
<div class="blueFont">
 1. new -> project -> Spring Lagacy Project -> project 명 지정 -> Simple Spring Maven
 2. Package를 만들어 준다. Package 명은 폴더 경로와 같다.
</div><br>

Package : com.jevalec.ex  --> com 폴더에 javalec 폴더 에 있는 ex 폴더를 의미 한다. <br>

[코드] : paypulse.github 에 올라감. <br>

---
<h2>DI와 IOC 컨테이너</h2><br>
spring은 IOC 컨테이너다.  <br>

{% for post in site.posts limit:1 %}
<img src="https://paypulse.github.io/assets/images/di1.png" width="937" height="537"/>  
{% endfor %}<br>
스프링은 방법 2와 같은 방식을 채택하고 있는데, 외부에서 객체 생성후 setter나 생성자에게 값을 넣어주는데,
이것을 주입이라 하고,DI (Dependency Injection)  외부에서 객체를 만들어서 주입 하는 기법을 의미 한다. <br>

{% for post in site.posts limit:1 %}
<img src="https://paypulse.github.io/assets/images/di2.png" width="838" height="522"/>  
{% endfor %}<br>
인터페이스를 부품화 시켰고, 이렇게 부품화 시킨것을 담고 있는 것을 IOC 컨테이너라고 한다.<br>
그리고 위 그림 전체를 스프링이라 한다. <br>
결국 스프링이란? 부품을 생성하고 조립하는 라이브러리 집합체라고 할 수 있다. <br>
앞으로 부품을 생성하고 부품을 조립하는 방법들에 대해서 살펴볼예정이다.<br>

---
<h1>3강. DI(Dependcy Injection) 1</h1><br>
<div class="redFont">
DI ,Spring의 가장 큰 특징이라 할 수 있다.
</div>

스프링을 이용한 객체 생성과 조립 <br>
<div class="blueFont">
  스프링  == 생성과 조립
</div>

xml에서 `<bean>` 이라는 태그를 확인 할 수 있는데, <bean>이 의미 하는것은 객체 하나 하나 라고 볼 수 있다. <br>

`<bean>`<br>
`<bean id="calculator" class="com.javalec.ex.Calculator"/>` 이 의미 하는 바 <br>
  - calculator 라는 객체는 실제로 com.javalec.ex.Calculator 입니다. 즉, 패키지 경로의 Calculator라는 클래스를 의미 한다.즉,bean 태그를 이용해 변수를 설정하고 객체를 생성한다. <br>
  - 외부에서 bean의 정보를 가져오기 위해 id를 사용하고, class type을 명시 한다. <br>
즉, 직접 class로 생성 할 것을 가지고,spring에서는 bean 태그를 가지고 xml에서 생성해주는 방식이다. <br>
{% highlight ruby %}
<bean id="calculator" class="com.javalec.ex.Calculator">
  <property name="calculator">
    <ref bean="calculator"/>
  </property>
  <property name="firstNum" value="10"></property>
  <property name="secondNum" value="2"></property>
</bean>

{% endhighlight %}
<br>
`<property>` : 멤버 변수에 대한 값과 변수 명을 지정한다. 즉, 필드 설정<br>
               그렇기 때문에 멤버 변수와 동일 하게 맞춰야 한다. <br>
`getBean()`  : getBean을 이용해 Bean에 관한 값을 가져 온다. <br>


---
<h1>4강. DI(Dependcy Injection) 2</h1><br>

{% highlight ruby %}

[기초 데이터 선언] : private String name;
<property name="name">
  <value>홍길동</value>
</property>

[List 타입] : private ArrayList<String> hobbys;
<property name="hobbys">  
  <list>
    <value>수영</value>
    <value>요리</value>
    <value>독서</value>
  </list>
</property>

[다른 빈객체 참조] : private BMICalculator bmiCalculator;
<property name="bmiCalculator">
  <ref bean="bmiCalculator"/>
</property>

{% endhighlight %}
<br>

{% highlight ruby %}
String configLocation = "classpath:applicationCTX.xml";

스프링 컨테이너 생성(IOC 컨텐이너 생성)
AbstractApplicationContext ctx = new GenericXmlApplicationContext(configLocation);

스프링 컨테이너에서 컴포넌트 가저 옮, 객체를 생성하고 조립하는것을 IOC 컨테이너가 한다.
MyInfo myInfo = ctx.getBean("myInfo", MyInfo.class);
myInfo.getInfo();

자원을 사용했으면, 해제를 해주는 습관을 들여야 한다.
좀 의문이다. java인데 가비지 컬렉터가 돌면서 알아서 해주지 않나?
ctx.close();
{% endhighlight %}
<br>

---
<h1>5강. DI활용 </h1><br>

Dependency Injection [의존 주입] <br>
{% for post in site.posts limit:1 %}
<img src="https://paypulse.github.io/assets/images/di3.png" width="961" height="252"/>  
{% endfor %}<br>

[applicationCTX.xml] : 생성자를 이용한 방법
{% highlight ruby %}
  <bean id="studentInfo" class="com.javalec.ex.StudentInfo">
    <constructor-arg>
      <ref bean="student1"/>
    </constructor-arg>
  </bean>
{% endhighlight %}
<br>
[Java 파일] : setter()로 접근한 방법
{% highlight ruby %}
  Student student2 = ctx.getBean("student2",Student.class);
  studentInfo.setStudent(student2);
  studentInfo.getStudentInfo();
{% endhighlight %}
<br>

생성자를 사용할때는 `<constructor-arg>`를 사용하고, Setter를 사용할때는  `<property>` 를 사용한다. <br>

<div class="redFont">
※ 질문 1 : 굳이 java에서 객체를 만들어서 구현하면되는데, 왜? xml 파일을 만들서 주입을 해야 하나?
</div><br>

인터페이스의 장점 : 타입을 통일 시킬 수 있고, 강제적으로 overried 해서 작업을 통일 할 수 있다. <br>
혼자하는 프로젝트에서는 장점을 느낄 수 없지만, 팀 단위의 프로젝트에서 큰 장점을 발휘 할 수 있다. <br>

Java 파일의 수정 없이 스프링 설정 파일만을 수정하여 부품들을 생성/조립 하고 있다. <br>
즉, java 코드를 수정 하지 않아도 config 파일인 xml 파일만 변경해 주면 유지 보수 차원에서 빠르게 진행 할 수 있다. <br>

---
<h1>6강. DI설정 방법 </h1><br>

1. XML 파일을 이용한 DI 설정 방법 <br>
{% highlight ruby %}
  <bean id="student1" class="com.javalec.ex.Student">
    <constructor-arg value="홍길동"/>   // 생성자 설정 (기초데이터)
    <constructor-arg value="10"/>
    <constructor-arg>             //생성자 설정 (객체 데이터)
      <list>
        <value>수영</value>
        <value>요리</value>
      </list>
    </constructor-arg>
    <property name="height">      //setter() 설정 (property)
      <value>187</value>      
    </property>
    <property name="weight" value="84"/>
  </bean>
{% endhighlight %}

<br>
2. property, constructor-arg 태그를 줄여서 사용 하는 방법 <br>
{% highlight ruby %}
<bean id="family" class="com.javalec.ex.Family" c:papaName="홍아빠" c:mamiName="홍엄마" p:sisterName="홍누나">
  <property name="brotherName"  value="홍오빠"/>
</bean>  

{% endhighlight %}
<br>

c:papaName[java의 멤버 변수와 이름 동일] ---> <constructor-arg value="홍아빠"> <br>
p:sisterName -----> <property value="홍누나"> <br>

<div class="redFont">
위 처럼 간단하게 사용 하려면 xml 파일에 명시를 해줘야 한다.
</div>
{% highlight ruby %}

xmlns:c="http://www.springframework.org/schema/c"
xmlns:p="http://www.springframework.org/schema/p"

{% endhighlight %}



---
